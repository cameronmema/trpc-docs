---
title: Hono Adapter
description: Ultra-fast web framework adapter for edge runtimes and serverless
icon: IconFlame
---

Hono is an ultra-fast web framework that works on any JavaScript runtime: Cloudflare Workers, Fastly Compute, Deno, Bun, Vercel, AWS Lambda, Lambda@Edge, and Node.js. The tRPC Hono adapter allows you to serve your tRPC API using Hono's lightweight and fast architecture.

<Callout title="Perfect for Edge Runtimes">
  Hono is designed for edge computing and serverless environments, making it
  ideal for high-performance APIs with minimal cold start times.
</Callout>

## Installation

Install the required packages:

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab value="npm">
    ```bash npm install @trpc/server hono @hono/trpc-server ```
  </Tab>
  <Tab value="pnpm">
    ```bash pnpm add @trpc/server hono @hono/trpc-server ```
  </Tab>
  <Tab value="yarn">
    ```bash yarn add @trpc/server hono @hono/trpc-server ```
  </Tab>
  <Tab value="bun">```bash bun add @trpc/server hono @hono/trpc-server ```</Tab>
</Tabs>

## Quick Start

### 1. Create your tRPC router

```typescript title="router.ts"
import { initTRPC } from '@trpc/server';
import { z } from 'zod';

const t = initTRPC.create();

export const appRouter = t.router({
  hello: t.procedure
    .input(z.object({ name: z.string() }))
    .query(({ input }) => {
      return { message: `Hello, ${input.name}!` };
    }),

  createPost: t.procedure
    .input(z.object({
      title: z.string(),
      content: z.string(),
    }))
    .mutation(async ({ input }) => {
      // Save to database
      return { id: Date.now(), ...input };
    }),
});

export type AppRouter = typeof appRouter;
```

### 2. Create context (optional)

```typescript title="context.ts"
import type { Context } from 'hono';

export function createContext(c: Context) {
  return {
    // Add your context here
    user: c.get('user'), // If you have auth middleware
    db: c.get('db'),     // Database connection
  };
}

export type TRPCContext = Awaited<ReturnType<typeof createContext>>;
```

### 3. Set up Hono server with tRPC

```typescript title="server.ts"
import { Hono } from 'hono';
import { trpcServer } from '@hono/trpc-server';
import { appRouter } from './router';
import { createContext } from './context';

const app = new Hono();

// Add tRPC to Hono
app.use(
  '/trpc/*',
  trpcServer({
    router: appRouter,
    createContext: (opts, c) => createContext(c),
    onError: ({ error, path }) => {
      console.error(`Error in tRPC handler on path '${path}':`, error);
    },
  }),
);

// Health check endpoint
app.get('/health', (c) => c.json({ status: 'ok' }));

export default app;
```

## Platform-Specific Deployments

<Tabs items={['Cloudflare Workers', 'Vercel Edge', 'Deno Deploy', 'Bun']}>
  <Tab value="Cloudflare Workers">
    ### Cloudflare Workers Setup

    ```typescript title="src/index.ts"
    import { Hono } from 'hono';
    import { trpcServer } from '@hono/trpc-server';
    import { appRouter } from './router';

    const app = new Hono();

    app.use(
      '/trpc/*',
      trpcServer({
        router: appRouter,
        createContext: (opts, c) => ({
          // Access Cloudflare bindings
          env: c.env,
          // Access request
          req: opts.req,
        }),
      }),
    );

    export default app;
    ```

    ```toml title="wrangler.toml"
    name = "my-trpc-api"
    main = "src/index.ts"
    compatibility_date = "2023-10-30"

    [build]
    command = "npm run build"

    [[kv_namespaces]]
    binding = "MY_KV"
    id = "your-kv-namespace-id"
    ```

    Deploy with:
    ```bash
    npx wrangler deploy
    ```

  </Tab>

  <Tab value="Vercel Edge">
    ### Vercel Edge Runtime

    ```typescript title="api/trpc/[...trpc].ts"
    import { Hono } from 'hono';
    import { handle } from 'hono/vercel';
    import { trpcServer } from '@hono/trpc-server';
    import { appRouter } from '../../lib/router';

    export const config = {
      runtime: 'edge',
    };

    const app = new Hono().basePath('/api');

    app.use(
      '/trpc/*',
      trpcServer({
        router: appRouter,
        createContext: () => ({}),
      }),
    );

    export default handle(app);
    ```

    ```json title="vercel.json"
    {
      "functions": {
        "api/trpc/[...trpc].ts": {
          "runtime": "edge"
        }
      }
    }
    ```

  </Tab>

  <Tab value="Deno Deploy">
    ### Deno Deploy

    ```typescript title="main.ts"
    import { Hono } from 'hono';
    import { trpcServer } from '@hono/trpc-server';
    import { appRouter } from './router.ts';

    const app = new Hono();

    app.use(
      '/trpc/*',
      trpcServer({
        router: appRouter,
        createContext: () => ({}),
      }),
    );

    Deno.serve(app.fetch);
    ```

    ```json title="deno.json"
    {
      "tasks": {
        "start": "deno run --allow-net main.ts"
      },
      "imports": {
        "hono": "https://deno.land/x/hono@v3.10.0/mod.ts",
        "@hono/trpc-server": "https://deno.land/x/hono_trpc_server@v0.3.2/mod.ts"
      }
    }
    ```

  </Tab>

  <Tab value="Bun">
    ### Bun Runtime

    ```typescript title="server.ts"
    import { Hono } from 'hono';
    import { trpcServer } from '@hono/trpc-server';
    import { appRouter } from './router';

    const app = new Hono();

    app.use(
      '/trpc/*',
      trpcServer({
        router: appRouter,
        createContext: () => ({}),
      }),
    );

    export default {
      port: 3000,
      fetch: app.fetch,
    };
    ```

    Run with:
    ```bash
    bun run server.ts
    ```

  </Tab>
</Tabs>

## Advanced Features

### Authentication Middleware

```typescript title="auth.ts"
import { createMiddleware } from 'hono/factory';
import { verify } from 'hono/jwt';

export const authMiddleware = createMiddleware(async (c, next) => {
  const token = c.req.header('Authorization')?.replace('Bearer ', '');

  if (!token) {
    return c.json({ error: 'Unauthorized' }, 401);
  }

  try {
    const payload = await verify(token, c.env.JWT_SECRET);
    c.set('user', payload);
    await next();
  } catch (err) {
    return c.json({ error: 'Invalid token' }, 401);
  }
});
```

```typescript title="server.ts"
import { Hono } from 'hono';
import { trpcServer } from '@hono/trpc-server';
import { appRouter } from './router';
import { authMiddleware } from './auth';

const app = new Hono();

// Apply auth middleware to protected routes
app.use('/trpc/protected/*', authMiddleware);

app.use(
  '/trpc/*',
  trpcServer({
    router: appRouter,
    createContext: (opts, c) => ({
      user: c.get('user'),
      isAuthenticated: !!c.get('user'),
    }),
  }),
);

export default app;
```

### CORS Configuration

```typescript title="server.ts"
import { Hono } from 'hono';
import { cors } from 'hono/cors';
import { trpcServer } from '@hono/trpc-server';
import { appRouter } from './router';

const app = new Hono();

// Configure CORS
app.use(
  '*',
  cors({
    origin: ['http://localhost:3000', 'https://yourdomain.com'],
    allowHeaders: ['Content-Type', 'Authorization'],
    allowMethods: ['POST', 'GET', 'OPTIONS'],
    exposeHeaders: ['Content-Length'],
    maxAge: 600,
    credentials: true,
  }),
);

app.use(
  '/trpc/*',
  trpcServer({
    router: appRouter,
    createContext: () => ({}),
  }),
);

export default app;
```

### Rate Limiting

```typescript title="rate-limit.ts"
import { createMiddleware } from 'hono/factory';

export const rateLimitMiddleware = createMiddleware(async (c, next) => {
  const clientIP = c.req.header('CF-Connecting-IP') || c.req.header('X-Forwarded-For');

  // Implement rate limiting logic
  // This is a simple example - use a proper rate limiting solution in production
  const key = `rate_limit:${clientIP}`;
  const current = await c.env.KV.get(key);
  const count = current ? parseInt(current) : 0;

  if (count > 100) { // 100 requests per minute
    return c.json({ error: 'Rate limit exceeded' }, 429);
  }

  await c.env.KV.put(key, (count + 1).toString(), { expirationTtl: 60 });
  await next();
});
```

### Database Integration

```typescript title="db.ts"
import { createMiddleware } from 'hono/factory';
import { drizzle } from 'drizzle-orm/d1';

export const dbMiddleware = createMiddleware(async (c, next) => {
  const db = drizzle(c.env.DB); // Cloudflare D1 database
  c.set('db', db);
  await next();
});
```

```typescript title="server.ts"
import { Hono } from 'hono';
import { trpcServer } from '@hono/trpc-server';
import { appRouter } from './router';
import { dbMiddleware } from './db';

const app = new Hono();

// Add database middleware
app.use('*', dbMiddleware);

app.use(
  '/trpc/*',
  trpcServer({
    router: appRouter,
    createContext: (opts, c) => ({
      db: c.get('db'),
      env: c.env,
    }),
  }),
);

export default app;
```

## Performance Optimizations

<Callout title="Edge Runtime Benefits">
  Hono is optimized for edge runtimes with minimal overhead, fast startup times,
  and excellent performance characteristics.
</Callout>

### Bundle Size Optimization

```typescript title="router.ts"
// Use dynamic imports for large dependencies
export const heavyProcedure = t.procedure
  .mutation(async ({ input }) => {
    // Dynamically import heavy libraries
    const { heavyFunction } = await import('./heavy-utils');
    return heavyFunction(input);
  });
```

### Caching

```typescript title="cache.ts"
import { createMiddleware } from 'hono/factory';

export const cacheMiddleware = createMiddleware(async (c, next) => {
  const cacheKey = c.req.url;
  const cached = await c.env.KV.get(cacheKey);

  if (cached) {
    return c.json(JSON.parse(cached));
  }

  await next();

  // Cache successful responses
  if (c.res.status === 200) {
    const responseClone = c.res.clone();
    const body = await responseClone.text();
    await c.env.KV.put(cacheKey, body, { expirationTtl: 300 }); // 5 minutes
  }
});
```

## Monitoring and Logging

```typescript title="logging.ts"
import { createMiddleware } from 'hono/factory';

export const loggingMiddleware = createMiddleware(async (c, next) => {
  const start = Date.now();
  await next();
  const duration = Date.now() - start;

  console.log({
    method: c.req.method,
    path: c.req.path,
    status: c.res.status,
    duration: `${duration}ms`,
    userAgent: c.req.header('User-Agent'),
  });
});
```

## Client Integration

### React Query Client

```typescript title="client.ts"
import { createTRPCReact } from '@trpc/react-query';
import { httpBatchLink } from '@trpc/client';
import type { AppRouter } from './server/router';

export const trpc = createTRPCReact<AppRouter>();

export const trpcClient = trpc.createClient({
  links: [
    httpBatchLink({
      url: 'https://your-hono-api.com/trpc',
      headers: () => ({
        authorization: `Bearer ${localStorage.getItem('token')}`,
      }),
    }),
  ],
});
```

## Deployment Examples

<Tabs items={['Cloudflare', 'Vercel', 'Railway']}>
  <Tab value="Cloudflare">
    ```bash
    # Install Wrangler CLI
    npm install -g wrangler

    # Login to Cloudflare
    wrangler login

    # Deploy
    wrangler deploy
    ```

    Your API will be available at: `https://your-worker.your-subdomain.workers.dev/trpc`

  </Tab>

  <Tab value="Vercel">
    ```json title="vercel.json"
    {
      "functions": {
        "api/**/*.ts": {
          "runtime": "edge"
        }
      }
    }
    ```

    Deploy with:
    ```bash
    npx vercel --prod
    ```

  </Tab>

  <Tab value="Railway">
    ```dockerfile title="Dockerfile"
    FROM oven/bun:1 as base
    WORKDIR /app

    COPY package.json bun.lockb ./
    RUN bun install

    COPY . .
    EXPOSE 3000

    CMD ["bun", "run", "server.ts"]
    ```

  </Tab>
</Tabs>

## Troubleshooting

<Accordions>
  <Accordion title="Cold Start Issues">
    Minimize cold starts by:

    - Keeping bundle size small
    - Using dynamic imports for heavy dependencies
    - Implementing proper caching strategies
    - Using edge runtimes like Cloudflare Workers

    ```typescript
    // Good: Dynamic import
    const heavyLib = await import('./heavy-library');

    // Avoid: Top-level imports for heavy libraries
    import heavyLib from './heavy-library';
    ```

  </Accordion>

  <Accordion title="Environment Variables">
    Access environment variables through Hono's context:

    ```typescript
    app.use('/trpc/*', trpcServer({
      router: appRouter,
      createContext: (opts, c) => ({
        env: c.env, // Environment variables
        secrets: {
          dbUrl: c.env.DATABASE_URL,
          jwtSecret: c.env.JWT_SECRET,
        },
      }),
    }));
    ```

  </Accordion>

  <Accordion title="CORS Issues">
    Make sure CORS is properly configured for your client domain:

    ```typescript
    app.use('*', cors({
      origin: process.env.NODE_ENV === 'production'
        ? ['https://yourdomain.com']
        : ['http://localhost:3000'],
      credentials: true,
    }));
    ```

  </Accordion>
</Accordions>

## Next Steps

<Cards>
  <Card href="/docs/server/procedures" title="Create Procedures">
    Learn how to define queries and mutations for your API
  </Card>
  <Card href="/docs/server/context" title="Add Context">
    Share data like database connections and user sessions
  </Card>
  <Card href="/docs/server/middlewares" title="Add Middleware">
    Implement authentication and custom logic
  </Card>
  <Card href="https://hono.dev/" title="Hono Documentation">
    Learn more about Hono web framework features
  </Card>
</Cards>
